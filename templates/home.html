{% load static %} 
<!DOCTYPE html>
<html lang="fr">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Tableau de Bord - MEDISCAN AI</title>
    <link rel="stylesheet" href="{% static 'css/style.css' %}">
    <script src="https://cdn.jsdelivr.net/npm/lucide@latest"></script>
</head>
<body>
{% include 'sidebar.html' %}
<div class="dashboard">
    <header>
        <h1><i data-lucide="stethoscope"></i> Bienvenue sur MEDISCAN AI </h1>
        <div class="header-actions">
            <a href="{% url 'diagnostics:analyse_frottis_sanguins' %}" class="button-primary"><i data-lucide="plus"></i> Nouvelle Analyse</a>
            <a href="{% url 'patients:liste_patients' %}" class="button-secondary"><i data-lucide="user-plus"></i> Nouveau Patient</a>
        </div>
    </header>
    <section class="alerts">
        <div class="alert alert-danger">
            <i data-lucide="alert-triangle"></i> 2 anomalies détectées aujourd'hui !
        </div>
        <div class="alert alert-success">
            <i data-lucide="check-circle"></i> Aucun cas critique en attente.
        </div>
    </section>
    <section class="stats">
        <div class="card">
            <h2><i data-lucide="users"></i> Total Patients</h2>
            <p class="number">1072</p>
            <span class="growth positive"><i data-lucide="trending-up"></i> +12% cette semaine</span>
        </div>
        <div class="card">
            <h2><i data-lucide="microscope"></i> Analyses Récentes</h2>
            <p class="number">197</p>
            <span class="growth positive"><i data-lucide="trending-up"></i> +10% cette semaine</span>
        </div>
        <div class="card">
            <h2><i data-lucide="activity"></i> Diagnostics Positifs</h2>
            <p class="number">142</p>
            <span class="growth positive"><i data-lucide="trending-up"></i> +24% cette semaine</span>
        </div>
        <div class="card">
            <h2><i data-lucide="bell"></i> Alertes Médicales</h2>
            <p class="number">3</p>
            <span class="growth negative"><i data-lucide="trending-down"></i> -1% cette semaine</span>
        </div>
    </section>
    <section class="chart-and-recent">
        <div class="chart">
            <h3><i data-lucide="line-chart"></i> Tendances des Diagnostics</h3>
            <canvas id="diagnosticChart"></canvas>
        </div>
        <div class="recent-analyses">
            <h3><i data-lucide="history"></i> Analyses Récentes</h3>
            <ul>
                <li> 28-Nov-2024 : <b>Paludisme</b> (Confiance : 98%) - <span class="status positive"><i data-lucide="check"></i> Positif</span></li>
                <li> 27-Nov-2024 : <b>Anémie</b> (Confiance : 92%) - <span class="status negative"><i data-lucide="alert-circle"></i> Alerte</span></li>
                <li> 27-Nov-2024 : <b>Normal</b> (Confiance : 99%) - <span class="status normal"><i data-lucide="smile"></i> Normal</span></li>
            </ul>
        </div>
    </section>
    <section class="patient-list">
        <h3> Derniers Patients</h3>
        <table>
            <thead>
                <tr>
                    <th> ID</th>
                    <th> Nom</th>
                    <th> Genre</th>
                    <th> Âge</th>
                    <th> Date</th>
                    <th> Diagnostic</th>
                    <th> Confiance</th>
                </tr>
            </thead>
            <tbody>
                <tr>
                    <td>#GS234FS</td>
                    <td>Marley Franci</td>
                    <td>Homme</td>
                    <td>27 ans</td>
                    <td>28-Nov-2024</td>
                    <td>Appendicite</td>
                    <td>98%</td>
                </tr>
                <tr>
                    <td>#CO182SD</td>
                    <td>Ashlynn Torff</td>
                    <td>Femme</td>
                    <td>26 ans</td>
                    <td>28-Nov-2024</td>
                    <td>Maladie coronaire</td>
                    <td>92%</td>
                </tr>
            </tbody>
        </table>
    </section>
</div>

<script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
<script src="https://unpkg.com/lucide@latest"></script>
<script>
    lucide.createIcons();
    // Animation sidebar
    const sidebar = document.getElementById('sidebar');
    const toggleBtn = document.getElementById('toggleSidebar');
    toggleBtn.addEventListener('click', () => {
        sidebar.classList.toggle('collapsed');
        // Change icon direction
        const icon = toggleBtn.querySelector('i');
        icon.setAttribute('data-lucide', sidebar.classList.contains('collapsed') ? 'chevron-right' : 'chevron-left');
        lucide.createIcons();
    });
    // Chart.js example
    const ctx = document.getElementById('diagnosticChart').getContext('2d');
    new Chart(ctx, {
        type: 'line',
        data: {
            labels: ['Lun', 'Mar', 'Mer', 'Jeu', 'Ven', 'Sam', 'Dim'],
            datasets: [{
                label: 'Diagnostics Positifs',
                data: [12, 19, 13, 15, 22, 30, 28],
                borderColor: '#8AC926',
                backgroundColor: 'rgba(138,201,38,0.1)',
                tension: 0.4
            }, {
                label: 'Alertes',
                data: [2, 1, 3, 2, 1, 0, 1],
                borderColor: '#E63946',
                backgroundColor: 'rgba(230,57,70,0.1)',
                tension: 0.4
            }]
        },
        options: {
            responsive: true,
            plugins: {
                legend: { position: 'top' },
            }
        }
    });
</script>
</body>
</html>
